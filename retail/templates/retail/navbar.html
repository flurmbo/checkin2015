{% load staticfiles %}

{% if not isMobile and not isTablet %}
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
	<!--<a class="navbar-brand" id="green-streets-brand" href="http://gogreenstreets.org">Green Streets</a>-->
	<!-- Filters -->
	<div class="navbar-right brand"><a href="http://gogreenstreets.org"><img src="{% static 'retail/images/logo.png' %}"></a></div>

	<p class="navbar-text"><b>Filter</b></p>
	<select class="navbar-form navbar-left form-control city">
		<option value="All">All cities</option>
	</select>
	<form class="navbar-form navbar-left" role="search">
		<div class="form-group">
			<input type="text" class="form-control" id="searchbox" placeholder="All names">
		</div>
	</form>
	<select class="navbar-form navbar-left form-control category">
		<option value="All">All categories</option>
	</select>
	<!-- Sort -->
	<p class="navbar-text"><b>Sort</b></p>
	<select class="navbar-form navbar-left form-control sort" id="sort">
			<option value="alphabet">Alphabetically</option>
			<option value="distance">Distance to me</option>
			<option value="address">Address</option>
	</select>
	<p class="navbar-text"><b>Print</b></p>
	<button type="button" class="btn btn-default" onclick="myFunction()" style="margin:8px;">
		<span class="glyphicon glyphicon-print" aria-hidden="true"></span> Print Selected Coupons
	</button>
</nav>
{% else %}
<!-- Mobile navbar -->
<nav class="navbar navbar-default navbar-fixed-top mobile-nav" role="navigation">
	<div>
	<ul class="nav nav-pills navbar-left nav-dropdown">
		<li class="dropdown">
			<a data-toggle="dropdown" href="#"><i class="fa fa-2x fa-bars"></i></a>
			<ul class="dropdown-menu pull-left" role="menu" aria-labelledby="dLabel">
				<li class="dropdown-li">
					<form role="search">
						<div class="mobile-btn">
							<input type="text" class="form-control" id="searchbox" placeholder="Filter by Name">
						</div>
					</form>
				</li>

				<li class="dropdown-li">
					<button type="button" class="btn btn-default mobile-btn" id="mobile-city-button" data-toggle="modal" data-target="#mobile-city-modal">Filter by City</button>
				</li>

				<li class="dropdown-li">
					<button type="button" class="btn btn-default mobile-btn" id="mobile-category-button" data-toggle="modal" data-target="#mobile-category-modal">Filter by Category</button>
				</li>

				<li class="dropdown-li">
					<button type="button" class="btn btn-default mobile-btn" id="mobile-sort-button" data-toggle="modal" data-target="#mobile-sort-modal">Sort results</button>
				</li>
				{% if not isTablet %}
				<li class="dropdown-li" id="mobile-button-li">
					<button type="button" class="btn btn-default mobile-btn" id="mobile-button" data-toggle="modal" data-target="#discountinfo-modal">How to get offers</button>
				</li>
				{% endif %}
				<li class="dropdown-li">
					<button type="button" class="btn btn-default mobile-btn" id="mobile-print-button" onclick="myFunction()">Print Selected Coupons</button>
				</li>
			</ul>
		</li>
	</ul>
	</div>

	<div class="navbar-right brand"><a href="http://gogreenstreets.org"><img src="{% static 'retail/images/logo.png' %}"></a></div>
</nav>
{% include 'retail/mobile-modals.html' %}
{% endif %}

<script type="text/javascript">
function myFunction() {
    var items=document.getElementsByName('acs');
	var win = window.open();
    win.document.write('<head></head>');
	win.document.querySelector('head').innerHTML += '<link rel="stylesheet" href="{% static 'css/style.1.css' %}" type="text/css"/>';

	for (i = 0; i < items.length; i++)
	{
		if(items[i].type=='checkbox' && items[i].checked==true)
		{
			var name = items[i].value;
			var address = "";
			var offer = "";

			{% for r in partners %}

			if (items[i].value == "{{ r.name|safe }}")
			{
				name = "{{ r.name }}";
				address = "{{ r.address }}";
				offer = "{{ r.offer }}";
			}

			{% endfor %}

			win.document.write("<div class=\"coupon\">");
			win.document.write("<img src=\"/static/img/coupon-background.png\">");
			win.document.write("<div class=\"center\">");
			win.document.write("<p>" + name + "<p>");
			win.document.write("<p>Offer: " + offer + "</p>");
			win.document.write("<p>Address: " + address + "</p>");
			win.document.write("</div>");
			win.document.write("</div>");
		}
	}

	win.document.close();
	win.focus();
}
</script>
